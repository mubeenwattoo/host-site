<!DOCTYPE html>
<html>

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6ZY1KSD55X"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6ZY1KSD55X');
  </script>
  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '409710449219518');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=409710449219518&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="./assets/css/output.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">

<title>Guest Pricing pAGE</title>
<!-- Contentsquare (Hotjar) Tracking -->
<script src="https://t.contentsquare.net/uxa/ce07a67e879d5.js"></script>
</head>
<body class="font-[lexend]">

 <section class="gradient-bg pt-8  lg:px-[64px] lg:pb-[48px] pb-[24px] p-6 ">
  <div class="max-w-[1440px] mx-auto">

    <div class="grid lg:grid-cols-[320px_1fr] lg:gap-16 gap-6">
<a href="./" class="inline-flex"><img src="./assets/images/logo.png" alt="logo" class="mt-4 lg:w-[124px] lg:h-[48px] w-[82px] h-[32px] "></a>
 
<div class="space-y-2">
<p class="lg:text-[36px] text-[20px]  font-[400] text-[#7D7A74] mt-2 ">
    Save  <span class="text-[#BE5103] font-[500]">Over $20,000/year</span>  In Rent 
  </p>
<span class="text-[20px] font-[300]">*There is a one time $199 placement fee once you agree to housing arrangement</span>

  </div>
</div>



  <div class=" mx-auto grid lg:grid-cols-[300px_1fr] gap-20 mt-12">

    <div class="lg:flex hidden flex-col gap-10">

      <!-- Step 1 -->
      <div class="flex flex-col items-start  gap-3 p-6 rounded-[14px] border-[2px] border-[var(--Color-Green,#5B7B5A)]
  bg-[var(--Color-Light-Green,#D9E1CE)] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.10),_0_8px_10px_-6px_rgba(0,0,0,0.10)] ">
          <span class="mx-auto w-12 h-12 rounded-full bg-[#5B7B5A] text-[24px] font-[300] text-white flex items-center justify-center ">1</span>

            <h3 class="text-[#2D2D2D]  text-[24px] font-[500] mt-3 ">Create Your Profile</h3>
            <p class="text-[#675F57] text-[16px] font-[400]">Tell us about yourself and preferences</p>
      </div>
<div class="flex flex-col items-start  gap-3 p-6 rounded-[14px] border-[2px] border-[var(--Color-Green,#5B7B5A)]
  bg-[var(--Color-Light-Green,#D9E1CE)] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.10),_0_8px_10px_-6px_rgba(0,0,0,0.10)] ">
          <span class="mx-auto w-12 h-12 rounded-full bg-[#5B7B5A] text-[24px] font-[300] text-white flex items-center justify-center ">2</span>

            <h3 class="text-[#2D2D2D]  text-[24px] font-[500] mt-3 ">Get Matched</h3>
            <p class="text-[#675F57] text-[16px] font-[400]">We connect you with households that fit your lifestyle</p>
      </div>
      
        <div class="flex flex-col items-start  gap-3 p-6 
  rounded-[14px]
  border-[2px]
  border-[var(--Color-Dark-Brown-30,rgba(103,95,87,0.30))]
  bg-[var(--Color-White-10,rgba(255,255,255,0.10))]
  shadow-[0_20px_25px_-5px_rgba(0,0,0,0.10),_0_8px_10px_-6px_rgba(0,0,0,0.10)]">
          <span class="mx-auto w-12 h-12 rounded-full bg-[var(--Color-White,#FFF)]
  shadow-[0_0_0_2.4px_#FAF8F6,_
          0_6px_9px_-1.8px_rgba(0,0,0,0.10),_
          0_2.4px_3.6px_-2.4px_rgba(0,0,0,0.10)] text-[24px] font-[300] text-[#5B7B5A] flex items-center justify-center ">3</span>

            <h3 class="text-[#2D2D2D]  text-[24px] font-[500] mt-3 ">Interview</h3>
            <p class="text-[#675F57] text-[16px] font-[400]">Meet the family, agree on expectations, and move into your new home</p>
      </div>

     

    </div>

    <div>
 <div class="w-full lg:pb-0 pb-10  ">
<span class="text-[20px] font-[400] text-center">Choose your enrollment plan to get started</span>

  

  <!-- PREMIUM CARD -->
  <div id="premiumCard" class="mt-6 bg-[#FFE9A6] border border-[#675F57] rounded-[16px] p-6 relative">

    <!-- Premium label + badge -->
    <div class="flex items-center lg:justify-start justify-between gap-8">
      <span class="lg:text-[24px] text-[20px] font-[500]  text-[#675F57]">Premium</span>

      <span class="bg-[#5B7B5A] text-white lg:text-[16px] text-[12px] font-[400] px-4 py-[4px] rounded-[8px]">
        BEST VALUE
      </span>
    </div>

    <!-- Price -->
    <div class="mt-8 lg:border-b-0 border-b-2 border-[#675F57] lg:pb-0 pb-5">
      <span class="lg:text-[40px] text-[36px] font-[600] text-[#2D2D2D]">$7.99</span>
      <span class="text-[16px] text-[#2D2D2D] font-[400]"> enrollment</span>
    </div>

    <!-- Features -->
    <ul class="lg:mt-3 mt-8 space-y-4 text-[16px] font-[400]">
      <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Select from the best housing opportunities</span>
      </li>
       <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Create a profile showcasing your candidacy including a video <br class="lg:block hidden"> interview with our summary notes</span>
      </li>

       <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Review profiles and video interviews of homeowners</span>
      </li>

   <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>ID verification status on your profile </span>
      </li>
         <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Appear higher in homeowner search results</span>
      </li>

         <li class="flex gap-4">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Search, review and apply for available housing opportunities</span>
      </li>

















      <button id="premiumBtnMobile" class="lg:hidden w-full mt-4 cursor-pointer bg-[#BE5103] hover:bg-[#9b5124] 
        text-white text-[16px] font-[400] px-6 py-3 rounded-full shadow-[0_10px_15px_-3px_rgba(0,0,0,0.10)] transition">
      Select Plan
    </button>
    </ul>

    <!-- Button -->
    <button id="premiumBtnDesktop" class="lg:block hidden absolute right-6 bottom-[35%] cursor-pointer bg-[#BE5103] hover:bg-[#9b5124] 
        text-white text-[16px] font-[400] px-6 py-3 rounded-full shadow-[0_10px_15px_-3px_rgba(0,0,0,0.10)] transition">
      Select Plan
    </button>
  </div>

  <!-- BASIC CARD -->
  <div id="basicCard" class="mt-6 bg-white border border-[#675F57] rounded-[16px] p-6 relative">

      <span class="lg:text-[24px] text-[20px] font-[500]  text-[#675F57]">Basic</span>


    <div class="mt-3 lg:border-b-0 border-b-2 border-[#675F57] lg:pb-0 pb-5">
      <span class="lg:text-[40px] text-[36px] font-[600] text-[#2D2D2D]">Free</span>

    </div>

    <ul class="lg:mt-4 mt-8 space-y-4 text-[16px] font-[400]">
      

        <li class="flex gap-4 ">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>No ID Verification or Video Interview for   homeowners to review</span>
      </li>

        <li class="flex gap-4 ">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.54995 15.8799L18.3519 7.07893C18.4493 6.9816 18.5639 6.9296 18.6959 6.92293C18.8279 6.91626 18.949 6.96826 19.059 7.07893C19.169 7.1896 19.2243 7.3086 19.225 7.43593C19.2256 7.56326 19.1706 7.68193 19.0599 7.79193L10.116 16.7419C9.95395 16.9039 9.76528 16.9849 9.54995 16.9849C9.33462 16.9849 9.14595 16.9039 8.98395 16.7419L4.93395 12.6919C4.83662 12.5946 4.78595 12.4789 4.78195 12.3449C4.77795 12.2109 4.83062 12.0889 4.93995 11.9789C5.04928 11.8689 5.16828 11.8139 5.29695 11.8139C5.42562 11.8139 5.54462 11.8689 5.65395 11.9789L9.54995 15.8799Z" fill="#2D2D2D"/>
</svg>

        <span>Get  notified and apply if  households are interested in meeting you</span>
      </li>
 <button id="basicBtnMobile" class="lg:hidden w-full mt-4 cursor-pointer bg-[#BE5103] hover:bg-[#9b5124] 
        text-white text-[16px] font-[400] px-6 py-3 rounded-full shadow-[0_10px_15px_-3px_rgba(0,0,0,0.10)] transition">
      Select Plan
    </button>
      
    </ul>

   

     

    <button id="basicBtnDesktop" class="lg:block hidden absolute right-6 bottom-[35%] cursor-pointer bg-[#BE5103] hover:bg-[#9b5124] 
        text-white text-[16px] font-[400] px-6 py-3 rounded-full shadow-[0_10px_15px_-3px_rgba(0,0,0,0.10)] transition">
      Select Plan
    </button>
  </div>

  <!-- Footer link -->
  

</div>


    </div>
  </div>
  </div>
</section>




<footer class="w-full bg-[#2E2E2E] pt-[42px] pb-[32px] lg:px-[64px] px-[24px]">
  <div class="w-full mx-auto text-center">

<img src="./assets/images/logo.png" alt="logo" class="lg:w-[124px] lg:h-[48px] w-[82px] h-[32px] mx-auto ">


    <hr class="border-[#7D7A74] lg:mb-12 mb-6 lg:mt-10 mt-5">

    <p class="text-[#7D7A74] text-[16px] font-[400]">
      ¬© 2025 NestHelpers. All rights reserved.
    </p>
  </div>
</footer>


<script>
document.addEventListener("DOMContentLoaded", () => {
  // Get all elements
  const premiumCard = document.getElementById("premiumCard");
  const basicCard = document.getElementById("basicCard");
  const premiumBtnDesktop = document.getElementById("premiumBtnDesktop");
  const premiumBtnMobile = document.getElementById("premiumBtnMobile");
  const basicBtnDesktop = document.getElementById("basicBtnDesktop");
  const basicBtnMobile = document.getElementById("basicBtnMobile");

  // Function to reset all buttons and cards
  function resetAll() {
    // Reset premium buttons
    if (premiumBtnDesktop) {
      premiumBtnDesktop.classList.remove("opacity-30", "cursor-not-allowed");
      premiumBtnDesktop.classList.add("cursor-pointer");
      premiumBtnDesktop.disabled = false;
    }
    if (premiumBtnMobile) {
      premiumBtnMobile.classList.remove("opacity-30", "cursor-not-allowed");
      premiumBtnMobile.classList.add("cursor-pointer");
      premiumBtnMobile.disabled = false;
    }

    // Reset basic buttons
    if (basicBtnDesktop) {
      basicBtnDesktop.classList.remove("opacity-30", "cursor-not-allowed");
      basicBtnDesktop.classList.add("cursor-pointer");
      basicBtnDesktop.disabled = false;
    }
    if (basicBtnMobile) {
      basicBtnMobile.classList.remove("opacity-30", "cursor-not-allowed");
      basicBtnMobile.classList.add("cursor-pointer");
      basicBtnMobile.disabled = false;
    }

    // Reset card borders
    if (premiumCard) {
      premiumCard.classList.remove("border-[3px]");
      premiumCard.classList.add("border", "border-[#675F57]");
      premiumCard.style.borderColor = "";
    }
    if (basicCard) {
      basicCard.classList.remove("border-[3px]");
      basicCard.classList.add("border", "border-[#675F57]");
      basicCard.style.borderColor = "";
    }
  }

  // Function to submit/update all collected data to Airtable
  function submitAllData(planType) {
    // Get all collected data from localStorage
    const allData = JSON.parse(localStorage.getItem('surveyData') || '{}');
    
    // Extract email and name for Hireflix integration before clearing
    const email = allData['data[Email]'] || '';
    const name = allData['data[Name]'] || '';
    
    // Store email and name separately for send.html (Hireflix integration)
    if (email && name) {
      localStorage.setItem('hireflixData', JSON.stringify({ email, name }));
    }
    
    // Add plan selection
    allData['data[Selected Plan]'] = planType;
    
    // Airtable API configuration
    const AIRTABLE_BASE_ID = 'appmdc27WmH4DfYcm';
    const AIRTABLE_TABLE_NAME = 'Helpers';
    const AIRTABLE_API_KEY = 'patJhPHpdtzafBrO3.9ba453f10d0deb3606bbb6872ebabf42e32d912913b97611f2e826c277ed3b78';
    const airtableUrl = `https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${AIRTABLE_TABLE_NAME}`;
    
    // Get session ID if available
    const sessionId = localStorage.getItem('surveySessionId');
    
    // Log the raw data received
    console.log('üîç Pricing Page - Raw data received:', allData);
    console.log('üîç Pricing Page - Data keys:', Object.keys(allData));
    
    // Map form data to Airtable field names
    const fields = {};
    
    // Helper function to safely get and convert field value
    function getFieldValue(key) {
      const value = allData[key];
      if (value !== undefined && value !== null && value !== '') {
        return String(value).trim();
      }
      return null;
    }
    
    // Field mapping from form data[FieldName] to Airtable field names
    // Always map all fields that exist in data
    const duration = getFieldValue('data[Duration]');
    if (duration) fields['Duration'] = duration;
    
    const study = getFieldValue('data[Study]');
    if (study) fields['Study'] = study;
    
    const age = getFieldValue('data[Age]');
    if (age) fields['Age'] = age;
    
    const gender = getFieldValue('data[Gender]');
    if (gender) fields['Gender'] = gender;
    
    const local = getFieldValue('data[Local]');
    if (local) fields['Local'] = local; // Long text
    
    const helpArea = getFieldValue('data[HelpArea]');
    if (helpArea) fields['HelpArea'] = helpArea; // Long text
    
    // Toggle switches - always include Yes or No (default to No if not set)
    const pets = getFieldValue('data[Pets]');
    fields['Pets'] = (pets && pets !== '') ? pets : 'No';
    
    const contribute = getFieldValue('data[Contribute]');
    fields['Contribute'] = (contribute && contribute !== '') ? contribute : 'No';
    
    const car = getFieldValue('data[Car]');
    fields['Car'] = (car && car !== '') ? car : 'No';
    
    const reference = getFieldValue('data[Reference]');
    fields['Reference'] = (reference && reference !== '') ? reference : 'No';
    
    const degree = getFieldValue('data[Degree]');
    fields['Degree'] = (degree && degree !== '') ? degree : 'No';
    
    const zipCode = getFieldValue('data[Zip]');
    if (zipCode) fields['ZipCode'] = zipCode;
    
    const nameValue = getFieldValue('data[Name]');
    if (nameValue) fields['Name'] = nameValue;
    
    const emailValue = getFieldValue('data[Email]');
    if (emailValue) fields['Email'] = emailValue;
    
    // Always include Selected Plan if it exists
    const selectedPlan = getFieldValue('data[Selected Plan]');
    if (selectedPlan) fields['Selected Plan'] = selectedPlan;
    
    // Note: Session Id is autonumber in Airtable, so we don't set it here
    // It will be auto-generated by Airtable when the record is created
    
    // Prepare Airtable record payload
    const payload = {
      fields: fields
    };
    
    const headers = {
      'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
      'Content-Type': 'application/json'
    };
    
    // Function to find existing record - prioritize stored record ID
    function findExistingRecord(callback) {
      // First, try to use the record ID stored from page 1 or page 7
      const storedRecordId = localStorage.getItem('airtableRecordId');
      if (storedRecordId) {
        console.log('üîç Pricing Page - Using stored record ID:', storedRecordId);
        // Verify the record still exists
        fetch(`${airtableUrl}/${storedRecordId}`, {
          method: 'GET',
          headers: headers,
          keepalive: true
        })
        .then(response => {
          if (response.ok) {
            console.log('‚úÖ Pricing Page - Stored record ID is valid');
            callback(storedRecordId);
          } else {
            console.log('‚ö†Ô∏è Pricing Page - Stored record ID not found, trying email lookup...');
            findRecordByEmail(callback);
          }
        })
        .catch(() => {
          console.log('‚ö†Ô∏è Pricing Page - Error verifying stored record ID, trying email lookup...');
          findRecordByEmail(callback);
        });
      } else {
        // No stored ID, try email lookup
        findRecordByEmail(callback);
      }
    }
    
    // Helper function to find record by email
    function findRecordByEmail(callback) {
      if (email) {
        const filterFormula = `{Email} = "${email}"`;
        fetch(`${airtableUrl}?filterByFormula=${encodeURIComponent(filterFormula)}`, {
          method: 'GET',
          headers: headers,
          keepalive: true
        })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }
          return response.json();
        })
        .then(result => {
          if (result.records && result.records.length > 0) {
            console.log('‚úÖ Pricing Page - Found record by email:', result.records[0].id);
            // Store this ID for future use
            localStorage.setItem('airtableRecordId', result.records[0].id);
            callback(result.records[0].id);
          } else {
            console.log('‚ùå Pricing Page - No record found by email');
            callback(null);
          }
        })
        .catch((error) => {
          console.error('‚ùå Pricing Page - Error finding record by email:', error);
          callback(null);
        });
      } else {
        console.log('‚ùå Pricing Page - No email provided');
        callback(null);
      }
    }
    
    // Log the payload being sent
    console.log('üì§ Pricing Page - Sending plan selection to Airtable:', payload);
    console.log('üìã Pricing Page - Fields being sent:', fields);
    console.log('üìã Pricing Page - Fields count:', Object.keys(fields).length);
    console.log('üìß Pricing Page - Email for lookup:', email);
    
    // Validate that we have fields to send
    if (Object.keys(fields).length === 0) {
      console.error('‚ùå Pricing Page - ERROR: No fields to send! Data object:', allData);
      console.error('‚ùå Pricing Page - Data keys available:', Object.keys(allData));
      return; // Don't send empty payload
    }
    
    // Try to find and update existing record, otherwise create new one
    findExistingRecord((recordId) => {
      console.log('üîç Pricing Page - Record lookup result:', recordId ? `Found: ${recordId}` : 'Not found, will create new');
      
      if (recordId) {
        console.log('üîÑ Pricing Page - Updating existing record with plan:', recordId);
        console.log('üì§ Pricing Page - Update payload:', JSON.stringify(payload, null, 2));
        
        // Update existing record
        fetch(`${airtableUrl}/${recordId}`, {
          method: 'PATCH',
          headers: headers,
          body: JSON.stringify(payload),
          keepalive: true
        })
        .then(response => {
          console.log('üì° Pricing Page - Update response status:', response.status, response.statusText);
          console.log('üì° Pricing Page - Update response headers:', response.headers);
          
          if (!response.ok) {
            return response.json().then(err => {
              console.error('‚ùå Pricing Page - Update error response:', err);
              console.error('‚ùå Pricing Page - Full error:', JSON.stringify(err, null, 2));
              throw new Error(`HTTP ${response.status}: ${JSON.stringify(err)}`);
            });
          }
          return response.json();
        })
        .then(result => {
          console.log('‚úÖ Pricing Page - Airtable record updated with plan successfully!');
          console.log('üìã Updated record:', JSON.stringify(result, null, 2));
          // Redirect immediately - API call uses keepalive so it will complete
          window.location.href = "send.html";
        })
        .catch((error) => {
          console.error('‚ùå Pricing Page - Airtable update failed:', error);
          console.error('üìã Error details:', error.message);
          console.error('üìã Full error:', error);
          // If update fails, create new record as fallback
          console.log('üîÑ Pricing Page - Attempting to create new record as fallback...');
          createNewRecord();
        });
      } else {
        // Create new record (email not found or no email provided)
        console.log('üÜï Pricing Page - No existing record found, creating new record with plan...');
        createNewRecord();
      }
    });
    
    // Helper function to create a new record
    function createNewRecord() {
      console.log('üì§ Pricing Page - Create payload:', JSON.stringify(payload, null, 2));
      console.log('üì§ Pricing Page - API URL:', airtableUrl);
      
      fetch(airtableUrl, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify(payload),
        keepalive: true
      })
      .then(response => {
        console.log('üì° Pricing Page - Create response status:', response.status, response.statusText);
        console.log('üì° Pricing Page - Create response headers:', response.headers);
        
        if (!response.ok) {
          return response.json().then(err => {
            console.error('‚ùå Pricing Page - Create error response:', err);
            console.error('‚ùå Pricing Page - Full error:', JSON.stringify(err, null, 2));
            throw new Error(`HTTP ${response.status}: ${JSON.stringify(err)}`);
          });
        }
        return response.json();
      })
      .then(result => {
        console.log('‚úÖ Pricing Page - Airtable record created with plan successfully!');
        console.log('üìã Created record:', JSON.stringify(result, null, 2));
        // Redirect immediately - API call uses keepalive so it will complete
        window.location.href = "send.html";
      })
      .catch((error) => {
        console.error('‚ùå Pricing Page - Airtable create failed:', error);
        console.error('üìã Error details:', error.message);
        console.error('üìã Full error:', error);
        console.error('üìã Payload was:', JSON.stringify(payload, null, 2));
        console.error('üìã Fields sent:', JSON.stringify(fields, null, 2));
        // Still redirect even on error (user shouldn't be stuck)
        window.location.href = "send.html";
      });
    }
    
    // Clear survey data but keep hireflixData for send.html
    localStorage.removeItem('surveyData');
  }

  // Function to select premium plan
  function selectPremium() {
    resetAll();
    
    // Disable premium buttons
    if (premiumBtnDesktop) {
      premiumBtnDesktop.classList.add("opacity-30", "cursor-not-allowed");
      premiumBtnDesktop.classList.remove("cursor-pointer");
      premiumBtnDesktop.disabled = true;
    }
    if (premiumBtnMobile) {
      premiumBtnMobile.classList.add("opacity-30", "cursor-not-allowed");
      premiumBtnMobile.classList.remove("cursor-pointer");
      premiumBtnMobile.disabled = true;
    }

    // Add border to premium card
    if (premiumCard) {
      premiumCard.classList.remove("border", "border-[#675F57]");
      premiumCard.classList.add("border-[3px]");
      premiumCard.style.borderColor = "#BE5103";
    }

    // Submit all collected data (including plan) to Airtable
    // Redirect will happen after successful API call (handled in submitAllData)
    submitAllData("Premium");
  }

  // Function to select basic plan
  function selectBasic() {
    resetAll();
    
    // Disable basic buttons
    if (basicBtnDesktop) {
      basicBtnDesktop.classList.add("opacity-30", "cursor-not-allowed");
      basicBtnDesktop.classList.remove("cursor-pointer");
      basicBtnDesktop.disabled = true;
    }
    if (basicBtnMobile) {
      basicBtnMobile.classList.add("opacity-30", "cursor-not-allowed");
      basicBtnMobile.classList.remove("cursor-pointer");
      basicBtnMobile.disabled = true;
    }

    // Add border to basic card
    if (basicCard) {
      basicCard.classList.remove("border", "border-[#675F57]");
      basicCard.classList.add("border-[3px]");
      basicCard.style.borderColor = "#BE5103";
    }

    // Submit all collected data (including plan) to Airtable
    // Redirect will happen after successful API call (handled in submitAllData)
    submitAllData("Basic");
  }

  // Add event listeners to premium buttons
  if (premiumBtnDesktop) {
    premiumBtnDesktop.addEventListener("click", selectPremium);
  }
  if (premiumBtnMobile) {
    premiumBtnMobile.addEventListener("click", selectPremium);
  }

  // Add event listeners to basic buttons
  if (basicBtnDesktop) {
    basicBtnDesktop.addEventListener("click", selectBasic);
  }
  if (basicBtnMobile) {
    basicBtnMobile.addEventListener("click", selectBasic);
  }
});
</script>




<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

</body>


</html>